(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),s=n(18),i=(n(30),n(31),n(2)),d=n(14),u=n(7),l=n(12),h=n(1),b=function(e){var t=e.width,n=e.height,r=e.star,a=e.snake,c=e.snakeArray,o=function(e){var t=e.x,n=e.y;return c.filter((function(e){return e.x===t&&e.y===n})).length>0};return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"border-[1px] flex flex-col w-min border-blue-800",children:Object(l.a)(Array(n)).map((function(e,n){return Object(h.jsx)("div",{className:"flex h-6 border-0 border-yellow-800",children:Object(l.a)(Array(t)).map((function(e,c){return Object(h.jsx)("div",{className:"w-6 h-6 border-[1px] border-yellow-800 text-xs \n                ".concat(a.x===c&&a.y===n?"bg-green-500 rounded-md":"","\n                ").concat(o({x:c,y:n})?"bg-green-200 rounded-md":""," \n                ").concat(r.x===c&&r.y===n?"bg-yellow-400":""," \n                    }")},t*n+c)}))},n)}))})})};function j(e){var t=this,n=e.snakeHeadPosition,r=e.width,a=e.height;this.boardWidth=r,this.boardHeight=a,this.wallTeleport=!0;for(var c=[],o=0;o<this.boardHeight;o++){for(var s=[],i=0;i<this.boardWidth;i++)s.push({x:i,y:o,snake:!1,star:!1});c.push(s)}this.boardArr=c,this.points=0,this.addPoint=function(){this.points++},this.gameStatus={isOn:!0,info:"",gameOver:!1},this.direction="R";var d=function(){return{x:Math.floor(Math.random()*t.boardWidth),y:Math.floor(Math.random()*t.boardHeight)}};this.starPosition=d(),this.snakeHeadPosition=n,this.snake=new f({startPosition:n}),this.getSnakeArray=this.snake.getSnakeArray;var u=function(e){var n=e.x,r=e.y,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.snakeHeadPosition={x:n,y:r},t.snake.moveSnakeBody({x:n,y:r},a)};this.makeNextStep=function(){var e=t.snakeHeadPosition,n=e.x,r=e.y,a=t.direction;if("L"===a&&(n-=1),"R"===a&&(n+=1),"D"===a&&(r+=1),"U"===a&&(r-=1),n<0||r<0||n>=t.boardWidth||r>=t.boardHeight){if(!t.wallTeleport)return void console.log("\u274c GAME OVER \ud83d\ude14");n<0&&(n=t.boardWidth+n),r<0&&(r=t.boardWidth+r),n>=t.boardWidth&&(n-=t.boardWidth),r>=t.boardWidth&&(r-=t.boardHeight),u({x:n,y:r})}else n===t.starPosition.x&&r===t.starPosition.y?(t.points+=1,console.log("yeah \u2b50 punkty: "+t.points),t.starPosition=d(),u({x:n,y:r},!0)):t.getSnakeArray().filter((function(e){return e.x===n&e.y===r})).length>0?console.log("\u274c GAME OVER \ud83c\udf70\ud83c\udf70\ud83c\udf70\ud83c\udf70 ZJAD\u0141EM SI\u0118 \ud83d\ude14"):u({x:n,y:r})},this.printGameInfo=function(){t.snake.printSnakeInfo(),console.dir(t)}}function f(e){var t=this,n=e.startPosition;this.length=1,this.head={x:n.x,y:n.y,next:null,prev:null};var r=this.head;this.addOnePart=function(e){var n={prev:r,next:null,x:e.x,y:e.y};r.next=n,r=n,t.length+=1},this.moveSnakeBody=function(e,n){!function e(r,a){var c=r.x,o=r.y,s=a.x,i=a.y;a.x=c,a.y=o,a.next?e({x:s,y:i},a.next):!a.next&&n&&t.addOnePart({x:c,y:o})}({x:e.x,y:e.y},t.head)},this.getSnakeArray=function(){for(var e=[],n=t.head;n;)e.push({x:n.x,y:n.y}),n=n.next;return e},this.printSnakeInfo=function(){console.log("Snake length: ".concat(t.length," || headPosition X:").concat(t.head.x,"|Y:").concat(t.head.y));for(var e=t.head;e;)console.log("X:".concat(e.x,"|Y:").concat(e.y)),e=e.next}}var x=function(e){var t=e.direction;return Object(h.jsx)(h.Fragment,{children:function(){switch(t){case"R":return"\u27a1\ufe0f";case"L":return"\u2b05\ufe0f";case"U":return"\u2b06\ufe0f";case"D":return"\u2b07\ufe0f"}}()})},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"R",t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1],o=function(e){"38"===e.keyCode||"ArrowUp"===e.code?c("U"):"40"===e.keyCode||"ArrowDown"===e.code?c("D"):"37"===e.keyCode||"ArrowLeft"===e.code?c("L"):"39"===e.keyCode||"ArrowRight"===e.code?c("R"):"32"!==e.keyCode&&" "!==e.code&&"Spacebar"!==e.code||console.log("SPACJA")};return Object(r.useEffect)((function(){document.addEventListener("keydown",o)}),[]),[a]};function y(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e})),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}var p=function(){var e=Object(r.useRef)(new j({snakeHeadPosition:{x:2,y:5},width:15,height:15})),t=function(){return{snakeHeadPosition:e.current.snakeHeadPosition,points:e.current.points,starPosition:e.current.starPosition,snakeArray:e.current.getSnakeArray()}},n=Object(r.useState)(t()),a=Object(u.a)(n,2),c=a[0],o=a[1],s=O(),i=Object(u.a)(s,1)[0];Object(r.useEffect)((function(){e.current.direction=i}),[i]);var l=function(){e.current.makeNextStep(),o(t())};return y((function(){"STOPPED"!==c.status&&l()}),300),Object(h.jsxs)("div",{className:"flex flex-col items-center pt-16 h-screen-js bg-gray-400",children:[Object(h.jsxs)("section",{className:"flex gap-5 justify-around",children:[Object(h.jsx)("button",{onClick:l,className:"p-2 bg-gray-300 rounded-md",children:"MOVE \ud83d\udc0d"}),Object(h.jsx)("button",{onClick:e.current.printGameInfo,className:"p-2 bg-gray-300 rounded-md",children:"PRINT INFO \ud83d\udc0d"}),Object(h.jsx)("button",{onClick:function(){o(Object(d.a)(Object(d.a)({},c),{},{status:"STOPPED"}))},className:"p-2 bg-gray-300 rounded-md",children:"STOP \u274c"}),Object(h.jsx)("button",{onClick:function(){e.current=new j({snakeHeadPosition:{x:2,y:5}}),o(Object(d.a)(Object(d.a)({},c),{},{status:"RESTARTED"}))},className:"p-2 bg-gray-300 rounded-md",children:"RESET \ud83d\udd01"})]}),Object(h.jsx)("section",{className:"mt-5",children:Object(h.jsxs)("h1",{className:"text-gray-800",children:["Direction: ",Object(h.jsx)(x,{direction:i})," ",Object(h.jsx)("div",{className:"inline-block w-10"})," Points:"," ",c.points]})}),Object(h.jsx)("section",{className:"mt-5",children:Object(h.jsx)(b,{width:e.current.boardWidth,height:e.current.boardHeight,star:e.current.starPosition,snake:c.snakeHeadPosition,snakeArray:c.snakeArray})})]})},g=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Dwa"})})},k=n(13),m=n.n(k),v=n(19),w=n(25),P=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(u.a)(c,2),s=o[0],i=o[1],d=Object(r.useState)([]),b=Object(u.a)(d,2),j=b[0],f=b[1],x=Object(w.a)("http://localhost:4000",{data:[]}),O=x.get,y=x.post,p=x.response,g=(x.loading,x.error,Object(r.useCallback)(Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/result?sort=dsc");case 2:t=e.sent,console.log("RESPONSE: "+p),console.dir(p),p.ok&&f(t);case 6:case"end":return e.stop()}}),e)}))),[O,p]));Object(r.useEffect)((function(){g(),i((20*Math.random()).toFixed(0))}),[]);var k=Object(r.useCallback)(Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y("/result",{name:n,points:s,finishTime:new Date});case 4:t=e.sent,p.ok&&(a(""),f((function(e){return[t].concat(Object(l.a)(e))})));case 6:case"end":return e.stop()}}),e)}))),[y,p,n]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Leaderboard"}),Object(h.jsxs)("h1",{children:["You got: ",s]}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k(),console.log("CLICK")},children:[Object(h.jsx)("input",{className:"border-2",type:"text",onChange:function(e){a(e.target.value)}}),Object(h.jsx)("button",{type:"submit",children:"OK"})]}),"Imie: ",n,Object(h.jsx)("div",{className:"flex flex-col mt-10",children:j.map((function(e){return Object(h.jsxs)("div",{children:[e.name," - punkty: ",e.points]},e._id)}))})]})};var S=function(){var e=Object(i.f)(),t=function(){document.querySelector(":root").style.setProperty("--vh",window.innerHeight/100+"px")};return Object(r.useEffect)((function(){return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}}),[]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"absolute flex items-center justify-around w-full h-10 bg-pink-600",children:[Object(h.jsx)("a",{href:"#/",onClick:function(){return e.push("/")},children:"Snake"}),Object(h.jsx)("a",{href:"#/",onClick:function(){return e.push("/2")},children:"Page2"}),Object(h.jsx)("a",{href:"#/",onClick:function(){return e.push("/results")},children:"Results"})]}),Object(h.jsx)(p,{}),Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{exact:!0,path:"/",children:Object(h.jsx)(p,{})}),Object(h.jsx)(i.a,{exact:!0,path:"/2",component:g}),Object(h.jsx)(i.a,{exact:!0,path:"/results",component:P})]})]})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(s.a,{children:Object(h.jsx)(S,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ea481bdf.chunk.js.map